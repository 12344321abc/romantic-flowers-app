# Веб-приложение "Romantic Flower Farm"

Это проект небольшого интернет-магазина для оптовой продажи цветов с фермы. Приложение включает в себя публичную витрину (каталог), личные кабинеты для клиентов и панель администратора для управления товарами, клиентами и заказами.

## Технический стек

- **Бэкенд:** Python 3.12 + FastAPI
- **База данных:** SQLite
- **ORM:** SQLAlchemy
- **Фронтенд:** HTML, CSS, JavaScript (без фреймворков)
- **Библиотека для Telegram:** `python-telegram-bot`
- **Веб-сервер для разработки:** Uvicorn

## Структура проекта

Ниже приведено описание основных файлов и директорий проекта.

```
/
├── app/                  # Основная папка с кодом приложения
│   ├── static/           # Статические файлы (фронтенд)
│   │   ├── css/styles.css  # Стили для всех страниц
│   │   ├── admin.html      # HTML-файл админ-панели
│   │   ├── admin.js        # JS-логика для админ-панели
│   │   ├── index.html      # HTML-файл главной страницы (каталога)
│   │   └── main.js         # JS-логика для главной страницы
│   ├── auth.py           # Логика авторизации: хэширование паролей, JWT-токены
│   ├── config.py         # Конфигурация приложения (загрузка из .env)
│   ├── crud.py           # Функции для взаимодействия с БД (Create, Read, Update, Delete)
│   ├── database.py       # Настройка подключения к SQLAlchemy
│   ├── main.py           # Главный файл FastAPI: все эндпоинты (API-ручки)
│   ├── models.py         # Модели данных SQLAlchemy (описание таблиц БД)
│   ├── schemas.py        # Pydantic-схемы для валидации данных API
│   └── telegram.py       # Логика отправки уведомлений в Telegram
│
├── create_admin.py     # Скрипт для создания первого администратора
├── decisions.md        # Журнал принятых архитектурных решений
├── flowers.db          # Файл базы данных SQLite
├── requirements.txt    # Список зависимостей Python
└── README.md           # Этот файл
```

## Краткое описание файлов

- **`main.py`**: Сердце бэкенда. Здесь определены все "ручки" API, которые может вызывать фронтенд (например, получить список товаров, создать заказ, добавить клиента).
- **`crud.py`**: Слой для работы с базой данных. Вся логика SQL-запросов (через SQLAlchemy ORM) инкапсулирована здесь. `main.py` вызывает функции из этого файла.
- **`models.py`**: Описывает, как выглядят таблицы в базе данных в виде Python-классов.
- **`schemas.py`**: Определяет, какие данные мы ожидаем на входе в API и какие отдаем на выходе. Pydantic автоматически валидирует данные по этим схемам.
- **`auth.py`**: Содержит все, что связано с безопасностью: проверка паролей и работа с токенами доступа.
- **`admin.js`**: Вся интерактивность админ-панели. Отправляет запросы к API для управления товарами, клиентами и просмотра заказов.
- **`main.js`**: Логика клиентской части — загрузка и отображение каталога.

## Запуск проекта для разработки

1.  **Создать и активировать виртуальное окружение:**
    ```bash
    python3 -m venv venv
    source venv/bin/activate
    ```
2.  **Установить зависимости:**
    ```bash
    pip install -r requirements.txt
    ```
3.  **Настроить конфигурацию:**
    - Создайте файл `.env`.
    - Добавьте в него `SECRET_KEY` (можно сгенерировать `openssl rand -hex 32`).
    - *Опционально:* добавьте `TOKEN` и `CHAT_ID` для уведомлений в Telegram.
4.  **Создать администратора:**
    - Запустите скрипт, подставив свой логин и пароль:
    ```bash
    python create_admin.py ваш_логин ваш_пароль
    ```
5.  **Запустить сервер:**
    ```bash
    uvicorn app.main:app --reload
    ```
    Сервер будет доступен по адресу `http://localhost:8000`.

## Будущие планы (оставшиеся задачи)

На основе этого кода мы планируем завершить разработку клиентской части:
- Создать страницу входа для клиентов.
- Реализовать добавление товаров в корзину.
- Создать страницу корзины и реализовать оформление заказа.
- Провести полное тестирование.
- Подготовить проект к развертыванию на удаленном сервере.